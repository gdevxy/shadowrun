<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout}">
<head>
	<title>Personnel Database - ShadowRun GM</title>
</head>
<body>
	<div layout:fragment="content">

		<!-- Header Stats -->
		<div class="status-bar mb-4">
			<div class="status-card glass-panel-sm">
				<div>
					<div class="status-card-label">Active Runners</div>
					<div class="status-card-value" th:text="${playerCount}">0</div>
				</div>
			</div>
			<div class="status-card glass-panel-sm">
				<div>
					<div class="status-card-label">NPCs</div>
					<div class="status-card-value" th:text="${npcCount}">0</div>
				</div>
			</div>
			<div class="status-card glass-panel-sm">
				<div>
					<div class="status-card-label">Total Personnel</div>
					<div class="status-card-value" th:text="${playerCount + npcCount}">0</div>
				</div>
			</div>
		</div>

		<!-- Player Characters -->
		<div th:if="${playerCharacters != null && !playerCharacters.isEmpty()}" class="card mb-4">
			<div class="card-header">
				<h3>
					<i class="fas fa-user-shield text-accent"></i>
					Shadowrunners
				</h3>
				<span class="badge badge-primary" th:text="${playerCount}">0</span>
			</div>
			<div class="card-body">
				<div class="table-responsive">
					<table class="data-table">
						<thead>
							<tr>
								<th>Callsign</th>
								<th>Archetype</th>
								<th>Metatype</th>
								<th>Status</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="character : ${playerCharacters}">
								<td>
									<strong class="text-info" th:text="${character.name}">Runner</strong>
								</td>
								<td th:text="${character.archetype}">Archetype</td>
								<td th:text="${character.metatype}">Metatype</td>
								<td>
									<span th:class="${'badge-status ' + (character.active ? 'badge-active' : 'badge-hostile')}" th:text="${character.status}">Active</span>
								</td>
								<td>
									<button class="btn-fui-sm">
										<i class="fas fa-eye"></i>
									</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<!-- NPCs -->
		<div th:if="${npcCharacters != null && !npcCharacters.isEmpty()}" class="card">
			<div class="card-header">
				<h3>
					<i class="fas fa-users-cog text-accent"></i>
					Contacts & Threats
				</h3>
				<span class="badge badge-primary" th:text="${npcCount}">0</span>
			</div>
			<div class="card-body">
				<div class="table-responsive">
					<table class="data-table">
						<thead>
							<tr>
								<th>Name</th>
								<th>Archetype</th>
								<th>Metatype</th>
								<th>Status</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="npc : ${npcCharacters}">
								<td>
									<strong class="text-info" th:text="${npc.name}">NPC Name</strong>
								</td>
								<td th:text="${npc.archetype}">Archetype</td>
								<td th:text="${npc.metatype}">Metatype</td>
								<td>
									<span
										th:class="${'badge-status ' + (npc.active ? 'badge-active' : 'badge-hostile')}"
										th:text="${npc.status}">Status</span>
								</td>
								<td>
									<button class="btn-fui-sm">
										<i class="fas fa-eye"></i>
									</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<!-- No Personnel State -->
		<div th:unless="${(playerCharacters != null && !playerCharacters.isEmpty()) || (npcCharacters != null && !npcCharacters.isEmpty())}"
			 class="glass-panel p-5 text-center">
			<i class="fas fa-users text-warning mb-3" style="font-size: 3rem;"></i>
			<h3 class="mb-3">No Personnel Records</h3>
			<p class="text-muted mb-4">Add shadowrunners and NPCs to your database.</p>
			<button class="btn-fui">
				<i class="fas fa-plus me-2"></i>
				Add Character
			</button>
		</div>

	</div>
</body>
</html>
